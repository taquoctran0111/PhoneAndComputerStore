jQuery(document).ready(function(a){"use strict";var b=a(".yith-s"),c="undefined"!=typeof woocommerce_params&&"undefined"!=typeof woocommerce_params.ajax_loader_url?woocommerce_params.ajax_loader_url:yith_wcas_params.loading,d=""==b.data("loader-icon")?c:b.data("loader-icon"),e=a("#yith-searchsubmit"),f=b.data("min-chars");e.on("click",function(){var b=a(this).closest("form");return""!=b.find(".yith-s").val()}),b.each(function(){var b=a(this),c=b.closest("form"),e=!1,g=c.find(".search_categories"),h=c.find(".yit_wcas_post_type"),i=c.find('[name="lang"]').length>0?c.find('[name="lang"]').val():"",j="undefined"==typeof b.data("append-to")?b.closest(".yith-ajaxsearchform-container"):b.closest(b.data("append-to")),k=yith_wcas_params.ajax_url.toString().replace("%%endpoint%%","yith_ajax_search_products");b.yithautocomplete({minChars:f,maxHeight:"auto",appendTo:j,triggerSelectOnValidInput:!1,serviceUrl:k+"&post_type="+h.val()+"&lang="+i+"&action=yith_ajax_search_products",onSearchStart:function(){b.css({"background-image":"url("+d+")","background-repeat":"no-repeat","background-position":"center right"})},onSearchComplete:function(){b.css("background-image","none"),a(window).trigger("resize"),b.trigger("focus")},onSelect:function(a){a.id!=-1&&(window.location.href=a.url)},beforeRender:function(){if("true"==yith_wcas_params.show_all&&e){var d={s:b.val(),post_type:c.find(".yit_wcas_post_type").val()};c.find(".search_categories").length>0&&(d.product_cat=c.find(".search_categories").val());var f=c.attr("action"),g=f.indexOf("?")!==-1?"&":"?",h=f+g+a.param(d),i='<div class="link-result"><a href="'+h+'">'+yith_wcas_params.show_all_text+"</a></div>",k=j.find(".autocomplete-suggestions");k.append(i)}},transformResult:function(b){return b="string"==typeof b?a.parseJSON(b):b,e=b.results,b},formatResult:function(b,c){var d="("+a.YithAutocomplete.utils.escapeRegExChars(c)+")",e="";return"undefined"!=typeof b.img&&(e+=b.img),e+='<div class="yith_wcas_result_content"><div class="title">',e+=b.value.replace(new RegExp(d,"gi"),"<strong>$1</strong>"),e+="</div>","undefined"!=typeof b.product_categories&&(e+=" "+b.product_categories),"undefined"!=typeof b.div_badge_open&&(e+=b.div_badge_open),"undefined"!=typeof b.on_sale&&(e+=b.on_sale),"undefined"!=typeof b.outofstock&&(e+=b.outofstock),"undefined"!=typeof b.featured&&(e+=b.featured),"undefined"!=typeof b.div_badge_close&&(e+=b.div_badge_close),"undefined"!=typeof b.price&&""!=b.price&&(e+=" "+yith_wcas_params.price_label+" "+b.price),"undefined"!=typeof b.excerpt&&(e+=" "+b.excerpt.replace(new RegExp(d,"gi"),"<strong>$1</strong>")),e+="</div>"}}),g.length&&g.on("change",function(a){var c=b.yithautocomplete(),d=yith_wcas_params.ajax_url.toString().replace("%%endpoint%%","yith_ajax_search_products");""!=g.val()?c.setOptions({serviceUrl:d+"&product_cat="+g.val()+"&lang="+i}):c.setOptions({serviceUrl:d+"&lang="+i}),c.hide(),c.onValueChange()}),h.length&&("any"==h.val()?g.attr("disabled","disabled"):g.removeAttr("disabled"),h.on("change",function(a){var c=b.yithautocomplete(),d=yith_wcas_params.ajax_url.toString().replace("%%endpoint%%","yith_ajax_search_products");"any"==h.val()?g.attr("disabled","disabled"):g.removeAttr("disabled"),""!=h.val()?c.setOptions({serviceUrl:d+"&post_type="+h.val()+"&lang="+i}):c.setOptions({serviceUrl:d+"&lang="+i}),c.hide(),c.onValueChange()}))})});